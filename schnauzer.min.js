/**! @license schnauzer v1.0.00; Copyright (C) 2017-2018 by Peter Dematté */
!function(t,e){"object"==typeof exports?module.exports=e(t):"function"==typeof define&&define.amd?define("schnauzer",[],function(){return e(t)}):t.Schnauzer=e(t)}(this,function(t,v,d){"use strict";var e=function(t,e){this.version="1.0.0",this.options={tags:["{{","}}"],entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},doEscape:!0,helpers:{},partials:{},recursion:"self",characters:'$"<>%-=@°',splitter:"|##|"},r(this,e||{},t)},r=function(t,e,r){for(var n in e)t.options[n]=e[n];for(var i in d=1,e=t.options,t.entityRegExp=function(t,e){for(var r in t)e+=r;return new RegExp("["+e+"]","g")}(e.entityMap,[]),t.stopRegExp=new RegExp(/^°+/),s(t,e.tags),t.partials={},e.partials)t.registerPartial(i,e.partials[i]);r&&t.registerPartial(e.recursion,r)};return e.prototype={render:function(t,e){return this.partials[this.options.recursion](t,e)},parse:function(t){return this.partials[this.options.recursion]||this.registerPartial(this.options.recursion,t)},registerHelper:function(t,e){this.options.helpers[t]=e},unregisterHelper:function(t){delete this.options.helpers[t]},registerPartial:function(t,e){return this.partials[t]=function l(c,t){var f=c.options,h=[],s=[],g=[],x=-1,v="",e=t.replace(c.sectionRegExp,function(t,e,r,n,i,s,a){var p=s+e+r,o=i.lastIndexOf(p);if(g.length)return t;if(x++,-1!==o)return g.push(x--),v=Array(++d).join("°"),i=i.replace(c.elseRegExp,function(t,e){return s+v+e+a}),p+n+a+i.substring(0,o)+s+e+v+r+i.substring(o+p.length)+s+"/"+v+r+a;var u=r.split("°").length;return r=r.replace(c.stopRegExp,""),/(?:with|each)/.test(r)&&(r=n,n=""),"if"===r||"unless"===r?(g.push(x--),i=i.replace(new RegExp(f.tags[0]+Array(u).join("°")+"else"+f.tags[1]),s+"/if°"+n+a+s+"^if°"+n+a),s+("if"===r?e:"^")+"if°"+n+a+i+s+"/if°"+n+a):(h.push(c.partRegExp.test(i)?P(c,l(c,i),r,n,"^"===e):P(c,b(c,i),r,n,"^"===e)),f.splitter)}).split(f.splitter);for(var r=0,n=g.length;r<n;r++)e[g[r]]=l(c,e[g[r]]);for(var r=0,n=e.length;r<n;r++)s.push(E(e[r])?e[r]:b(c,e[r])),h[r]&&s.push(h[r]);return function(t,e){t.__schnauzer&&!e||(t=R(t,e));for(var r=0,n=s.length,i="";r<n;r++)i+=s[r](t)||"";return i}}(this,e)},unregisterPartial:function(t){delete this.options.partials[t]},setTags:function(t){s(this,t)}},e;function s(t,e){var r=t.options.tags="{{"===e[0]?["{{2,3}","}{2,3}"]:e,n=t.options.characters;t.variableRegExp=new RegExp("("+r[0]+")([>!&=]\\s*)*([\\w\\"+n+"\\.\\s*]+)*"+r[1],"g"),t.sectionRegExp=new RegExp(r[0]+"(#|\\^)([\\w"+n+"]*)\\s*(.*?)"+r[1]+"([\\S\\s]*?)("+r[0]+")\\/\\2("+r[1]+")","g"),t.partRegExp=new RegExp(r[0]+"[#^]"),t.escapeRegExp=new RegExp(r[0]),t.elseRegExp=new RegExp(r[0]+"(else)"+r[1])}function E(t){return t&&"function"==typeof t}function R(t,e,r,n){return{data:r||t.data||t,extra:e&&[e]||t.extra||[],path:[].concat(t.path!==v?t.path:t,r||[]),helpers:n||{},__schnauzer:!0}}function u(t,e){for(var r=0,n=e.length;r<n;r++)t=t&&t[e[r]];return t}function y(t,e,r,n){var i=[],s=t.path.length-1-n,a=t.path[s]||{},p=t.helpers[e]!==v?t.helpers[e]:a[e]!==v?a[e]:u(a,i=r||e.split(/[\.\/]/));if(p!==v)return p;for(var o=t.extra.length;o--;){if(t.extra[o][e]!==v)return t.extra[o][e];if((p=u(t.extra[o],i))!==v)return p}}function m(t,e){var r=t.split(/\s*=\s*/),n=1<r.length?r[1]:r[0],i='"'===n[0]||"'"===n[0],s=0,a=[],p=!1;if(i)n=n.replace(/(?:^['"]|['"]$)/g,"");else{var o=n.split("../");1<o.length&&(n=o.pop(),s=o.length),name=name.replace(/^(?:\.|this)\//,function(){return p=!0,""}),a=n.split(/[\.\/]/)}return{name:1<r.length?r[0]:n,value:i||!e?n:y(e,n,a,s),isString:i,isStrict:p,keys:a,depth:s}}function w(t,e){return String(t).replace(e.entityRegExp,function(t){return e.options.entityMap[t]})}function S(e,r,t){return{getData:function(t){return m(t,r)},escapeHtml:function(t){return w(t,e)}}}function b(f,h){var g=[],x=f.options;return h=h.replace(f.variableRegExp,function(t,e,r,n){var i,s=r&&r[0]||"",a=">"===s,p="",o=!1,u={};if("!"===s||"="===s)return"";if(p=(n=n.split(/\s+/)).shift(),a)for(var l=n.length,c={};l--;)u[(c=m(n[l])).name]=c;else o=(u=m(p)).isStrict,p=u.name;return i=p===x.recursion,a=a&&(!!f.partials[p]||i),g.push({value:a?f.partials[p]:p,data:a?u:n,isPartial:a,isUnescaped:!x.doEscape||"&"===s||f.escapeRegExp.test(e)&&3===e.length,isSelf:i,depth:a?v:u.depth,isStrict:o,keys:a?v:u.keys}),x.splitter}).split(x.splitter),function(t){for(var e,r,n,i,s,a=0,p=h.length,o="";a<p;a++)if(o+=h[a],g[a]!==v){if(r=(s=g[a]).value,!0===s.isPartial){var u={};for(var l in t.data)u[l]=t.data[l];for(var c in s.data)n=s.data[c],u[c]=n.isString?n.value:y(t,n.value,n.keys,n.depth);e=(r||f.partials[x.recursion])(R(u,t.extra))}else e=y(t,r,s.keys,s.depth),e=(i=!s.isStrict&&x.helpers[r]||E(e)&&e)?i.apply(S(f,t),s.data):r.isExecutor?r(t):e&&(s.isUnescaped?e:w(e,f));e!==v&&(o+=e)}return o}}function P(u,l,c,f,h){var g="if°"===c.substr(0,3);return c=m(c=g?c.replace(/^if°/,""):c),function(t){var e,r=y(t,c.name,c.keys,c.depth);if((e=r)&&e.constructor===Array&&!g){if(h)return r.length?"":l(r);for(var n=0,i=r.length,s="";n<i;n++){var a={"@index":""+n,"@last":n===i-1,"@first":!n,".":r[n],this:r[n]};t=R(t,t.extra,r[n],a),s+=l(t),t.path.pop()}return s}var p="object"==typeof r?r:t,o=!c.isStrict&&u.options.helpers[c.name]||E(r)&&r;return o?o.apply(S(u,t),[l(t)].concat(f.split(/\s+/))):h&&!r||!h&&r?l(g?t:R(t,t.extra,p,{".":r,this:r})):void 0}}});
