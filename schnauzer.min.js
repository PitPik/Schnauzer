/**! @license schnauzer v1.3.0; Copyright (C) 2017-2018 by Peter Dematt√© */
!function(t,e){"object"==typeof exports?module.exports=e(t):"function"==typeof define&&define.amd?define("schnauzer",[],function(){return e(t)}):t.Schnauzer=e(t)}(this,function(t,d){"use strict";var e=function(t,e){this.version="1.3.0",this.options={tags:["{{","}}"],entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},doEscape:!0,helpers:{},decorators:{},partials:{},recursion:"self",characters:'$"<>%-=@',splitter:"|##|",tools:d},r(this,e||{},t)},r=function(t,e,r){for(var n in e)t.options[n]=e[n];for(var i in e=t.options,t.entityRegExp=new RegExp("["+m(e.entityMap,[]).join("")+"]","g"),s(t,e.tags),t.helpers=e.helpers,t.decorators=e.decorators,t.partials={},e.partials)t.registerPartial(i,e.partials[i]);r&&t.registerPartial(e.recursion,r)},y=Array.isArray||function(t){return t&&t.constructor===Array},x=function(t){return t&&"function"==typeof t},m=Object.keys||function(t,e){for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e};return e.prototype={render:function(t,e){return this.partials[this.options.recursion](t,e)},parse:function(t){return this.registerPartial(this.options.recursion,t)},registerHelper:function(t,e){this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerDecorator:function(t,e){this.decorators[t]=e},unregisterDecorator:function(t,e){delete this.decorators[t]},registerPartial:function(t,e){return this.partials[t]=function(o,r){var t="",p=[],u=o.options.tags;for(;t!==r&&(t=r);)r=r.replace(o.sectionRegExp,function(t,e,r,n,i,s,a){return"#*"===r?(o.registerPartial(i.replace(/(?:^['"]|['"]$)/g,""),a),""):(a=a.split(o.elseSplitter),p.push(c(o,[l(o,a[0],p),a[1]&&l(o,a[1],p)],n,i&&i.replace(/[(|)]/g,"").split(/\s+/)||[],"{{{"===e,"^"===r)),u[0]+"-section- "+(p.length-1)+u[1])});return r=l(o,r,p),function(t,e){return r(w(t,e&&(y(e)&&e||[e])))}}(this,e)},unregisterPartial:function(t){delete this.partials[t]},setTags:function(t){s(this,t)}},e;function s(t,e){var r="{{"===e[0]?["{{2,3}","}{2,3}"]:e,n=t.options.characters+"\\][";t.variableRegExp=new RegExp("("+r[0]+")([>!&=])*\\s*([\\w\\"+n+"\\.]+)\\s*([\\w"+n+"\\.\\s]*)"+r[1],"g"),t.sectionRegExp=new RegExp("("+r[0]+")([#^*]*)\\s*([\\w"+n+"]*)(?:\\s+([\\w$\\s|./"+n+"]*))*("+r[1]+")((?:(?!\\1[#^])[\\S\\s])*?)\\1\\/\\3\\5","g"),t.elseSplitter=new RegExp(r[0]+"else"+r[1])}function p(t,e){for(var r=0,n=t.length;r<n;r++)e[e.length]=t[r];return e}function w(t,e,r,n){var i=r!==d,s=!t.__schnauzerData,a=i&&!s&&t.extra||[],o=!s&&t.helpers||[];return{extra:e?p(e,a):a,path:s?[t]:i?p(t.path,[r]):t.path,helpers:n?p(o,i&&[n]||[{}]):o,__schnauzerData:!0}}function u(t,e){for(var r=0,n=e.length;r<n;r++)t=t&&t[e[r]];return t}function E(t,e,r,n){var i=t.path[n]||{},s=t.helpers[n]||{},a=s[e]!==d?s[e]:u(s,r);if(a!==d&&"."!==r[0]||(a=i[e]!==d?i[e]:u(i,r)),a!==d)return a;for(var o=t.extra.length;o--;){if(t.extra[o][e]!==d)return t.extra[o][e];if((a=u(t.extra[o],r))!==d)return a}}function k(t){var e=t.split(/\s*=\s*/),r=1<e.length?e[1]:e[0],n='"'===r.charAt(0)||"'"===r.charAt(0),i=!1,s=0,a=[],o=[],p=!1;return n?r=r.replace(/(?:^['"]|['"]$)/g,""):(1<(o=r.split("../")).length&&(r=("@"===o[0]?"@":"")+o.pop(),s=o.length),name=name.replace(/^(?:\.|this)\//,function(){return p=!0,""}),a=r.split(/[\.\/]/),r=r.replace(/^(\.\/|this\.|this\/|\*)/,function(t,e){return"*"===e?i=!0:(p=!0,a[0]="."),""}).replace(/(?:^\[|\]$)/g,"")),{name:1<e.length?e[0]:r,value:r,isString:n,isInline:i,strict:p,keys:a,depth:s}}function v(t,e){return String(t).replace(e.entityRegExp,function(t){return e.options.entityMap[t]})}function R(e,t,r,n,i,s,a,o,p){return e.options.tools?e.options.tools(e,E,w,t,r,n,i,s,a,o):t.apply({getData:function(t){return(t=s.rawParts[t]||{value:t,keys:[t],depth:0}).isString?t.value:E(i,t.value,t.keys,t.depth)},escapeHtml:function(t){return v(t,e)},getBody:function(){return a&&a(i)||""},gatAltBody:function(){return o&&o(i)||""},data:i.path[0]},s.isInline?[function(){return a||""}]:n)}function o(t,e,r,n,i){for(var s={},a={},o=e.length,p={};o--;)s[(p=k(e[o])).name]=p,a[e[o]]=p;return{name:r.name,vars:e,parts:s,rawParts:a,partial:">"===i&&(t.partials[r.name]||t.partials[t.options.recursion]),isInline:r.isInline,isUnescaped:!t.options.doEscape||"&"===i||n,depth:r.depth,strict:r.strict,keys:r.keys}}function P(t,e,r,n,i){var s=n?{"@index":i,"@last":i===n-1,"@first":0===i}:{};return s["@key"]=e,s["."]=s.this=t,r&&(s[r[0]]=t,s[r[1]]=e),s}function l(c,h,f){var g=[],a=c.options.splitter;return h=h.replace(c.variableRegExp,function(t,e,r,n,i){var s=r&&r.charAt(0)||"";return"-section-"===n?(g.push({section:i}),a):"!"===s||"="===s?"":(i=i.split(/\s+/),"*"===n&&(n+=i.shift()),g.push(o(c,i,k(n),"{{{"===e,s)),a)}).split(a),function(t){for(var e="",r="",n=null,i={},s={},a={},o=0,p=h.length;o<p;o++)if(e+=h[o],(a=g[o])!==d)if(a.section)e+=f[a.section](t)||"";else if(a.isInline)e=R(c,c.decorators[a.name||a.vars[0]],a.name,a.vars,t,a,e)||e,x(e)&&(e=e());else{if(a.partial){for(var u in s={},t.path[0])s[u]=t.path[0][u];for(var l in a.parts)i=a.parts[l],s[l]=i.isString?i.value:E(t,i.value,i.keys,i.depth);(s=w(s)).helpers=[t.helpers[0]],s.extra=[t.extra[0]],r=a.partial(s)}else r=E(t,a.name,a.keys,a.depth),r=(n=!a.strict&&c.helpers[a.name]||x(r)&&r)?R(c,n,a.name,a.vars,t,a):r&&(a.isUnescaped?r:v(r,c));r!==d&&(e+=r)}return e}}function c(u,l,c,h,t,f){var g,v=c;return c=k(!h.length||"if"!==c&&"each"!==c&&"with"!==c&&"unless"!==c?c:h.shift()),g="as"===h[0]&&[h[1],h[2]],h=o(u,h,k(c.name),t,""),function(t){var e=E(t,c.name,c.keys,c.depth),r=!c.strict&&(u.helpers[c.name]||x(e)&&e),n=r&&R(u,r,c.name,h.vars,t,h,l[0],l[1]),i=y(e),s="each"===v&&!i&&"object"==typeof e&&e,a="";if(r){if(t.helpers[0]=P(n,c.name,g),"if"===v)return n?l[0](t):l[1]&&l[1](t);if("unless"===v)return n?l[1]&&l[1](t):l[0](t);i=y(e=n)}if("unless"===v?e=!e:s&&(e=m(e,[])),i||s){if(f)return e.length?"":l[0](e);t.path.unshift({}),t.helpers.unshift({});for(var o=0,p=e.length;o<p;o++)t.path[0]=i?e[o]:s[e[o]],t.helpers[0]=P(t.path[0],i?o:e[o],g,p,o),a+=l[0](t);return t.path.shift(),t.helpers.shift(),a}return f&&!e||!f&&e?r&&"string"==typeof e?e:l[0]("unless"===v||"if"===v?t:w(t,d,e,P(e,c.name,g))):l[1]&&l[1](t)}}});