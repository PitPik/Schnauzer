/**! @license schnauzer v1.0.00; Copyright (C) 2017-2018 by Peter Dematté */
!function(t,r){"object"==typeof exports?module.exports=r(t):"function"==typeof define&&define.amd?define("schnauzer",[],function(){return r(t)}):t.Schnauzer=r(t)}(this,function(t,E,v){"use strict";var r=function(t,r){this.version="1.0.0",this.options={tags:["{{","}}"],entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},doEscape:!0,helpers:{},partials:{},recursion:"self",characters:'$"<>%-=@',splitter:"|##|"},e(this,r||{},t)},e=function(t,r,e){for(var n in r)t.options[n]=r[n];for(var i in v=1,r=t.options,t.entityRegExp=function(t,r){for(var e in t)r+=e;return new RegExp("["+r+"]","g")}(r.entityMap,[]),t.stopRegExp=new RegExp(/^°+/),s(t,r.tags),t.partials={},r.partials)t.registerPartial(i,r.partials[i]);e&&t.registerPartial(r.recursion,e)};return r.prototype={render:function(t,r){return this.partials[this.options.recursion](t,r)},parse:function(t){return this.partials[this.options.recursion]||this.registerPartial(this.options.recursion,t)},registerHelper:function(t,r){this.options.helpers[t]=r},unregisterHelper:function(t){delete this.options.helpers[t]},registerPartial:function(t,r){return this.partials[t]=function u(c,t){var l=c.options,f=[],s=[],h=[],g=-1,x="",r=t.replace(c.sectionRegExp,function(t,r,e,n,i,s,a){var p=s+r+e,o=i.lastIndexOf(p);return h.length?t:(g++,-1!==o?(h.push(g--),x=Array(++v).join("°"),p+n+a+i.substring(0,o)+s+r+x+e+i.substring(o+p.length)+s+"/"+x+e+a):(e=e.replace(c.stopRegExp,""),f.push(c.partRegExp.test(i)?P(c,u(c,i),e,n,"^"===r):P(c,b(c,i),e,n,"^"===r)),l.splitter))}).split(l.splitter);for(var e=0,n=h.length;e<n;e++)r[h[e]]=u(c,r[h[e]]);for(var e=0,n=r.length;e<n;e++)s.push(d(r[e])?r[e]:b(c,r[e])),f[e]&&s.push(f[e]);return function(t,r){t.__schnauzer&&!r||(t=R(t,r));for(var e=0,n=s.length,i="";e<n;e++)i+=s[e](t)||"";return i}}(this,r)},unregisterPartial:function(t){delete this.options.partials[t]},setTags:function(t){s(this,t)}},r;function s(t,r){var e=t.options.tags="{{"===r[0]?["{{2,3}","}{2,3}"]:r,n=t.options.characters;t.variableRegExp=new RegExp("("+e[0]+")([>!&=]\\s*)*([\\w\\"+n+"\\.\\s*]+)*"+e[1],"g"),t.sectionRegExp=new RegExp(e[0]+"(#|\\^)([\\w"+n+"]*)\\s*(.*?)"+e[1]+"([\\S\\s]*?)("+e[0]+")\\/\\2("+e[1]+")","g"),t.partRegExp=new RegExp(e[0]+"[#^]"),t.escapeRegExp=new RegExp(e[0])}function d(t){return t&&"function"==typeof t}function R(t,r,e,n,i){return{data:e||t.data||t,extra:r&&[].concat(r)||t.extra||[],path:[].concat(t.path!==E?t.path:t,n||[]),helpers:i||{},__schnauzer:!0}}function u(t,r){for(var e=0,n=r.length;e<n;e++)t=t&&t[r[e]];return t}function y(t,r,e,n){var i=[],s=t.path.length-1-(0<=n?n:0),a=0<=n&&0<=s?t.path[s]:t.data,p=t.helpers[r]!==E?t.helpers[r]:a&&a[r]!==E?a[r]:u(a,i=e||r.split(/[\.\/]/));if(p!==E)return p;for(var o=t.extra.length;o--;){if(t.extra[o][r]!==E)return t.extra[o][r];if((p=u(t.extra[o],i))!==E)return p}}function c(t,r){return String(t).replace(r.entityRegExp,function(t){return r.options.entityMap[t]})}function w(r,e,t){return{getData:function(t){return t=t.split("../"),y(e,t.pop(),E,t.length||-1)},escapeHtml:function(t){return c(t,r)}}}function b(g,u){var x=[],v=g.options;return u=u.replace(g.variableRegExp,function(t,r,e,n){var i,s=e&&("!"===e[0]||"="===e[0]),a=!v.doEscape||g.escapeRegExp.test(r)&&3===r.length||e&&"&"===e[0],p=e&&">"===e[0],o="",u=[],c=!1,l={};if(s)return"";if(o=(u=(o=(n=n.replace(/^(?:\.|this)\//,function(){return c=!0,""}).split(/\s+/)).shift(n)).split("../")).pop(),p)for(var f=n.length,h=[];f--;)l[(h=n[f].split("="))[1]?h[0]:""+f]=h[1]?h[1]:h[0];return i=o===v.recursion,x.push(p&&(g.partials[o]||i)?[g.partials[o],l,p,a,i,E,c]:[o,n,E,a,E,u.length,c]),v.splitter}).split(v.splitter),function(t){for(var r,e,n,i=0,s=u.length,a="";i<s;i++)if(a+=u[i],x[i]!==E){if(e=x[i][0],!0===x[i][2]){for(var p in x[i][1])n=x[i][1][p],x[i][1][p]='"'!==n[0]&&"'"!==n[0]&&y(t,n)||n.replace(/(?:^'|^"|'$|"$)*/g,"");r=(e||g.partials[v.recursion])(t,x[i][1])}else{r=t.data[e]!==E?t.data[e]:y(t,e,E,x[i][5]);var o=!x[i][6]&&v.helpers[e]||d(r)&&r;r=o?o.apply(w(g,t),[].concat(x[i][1])):e.isExecutor?e(t):r&&(x[i][3]?r:c(r,g))}r!==E&&(a+=r)}return a}}function P(u,c,t,l,f){var r=t.split("../"),h=r.pop(),g=!1,x=r.length;return h=h.replace(/^(?:\.|this)\//,function(){return g=!0,""}),function(t){var r,e=y(t,h,E,x);if((r=e)&&r.constructor===Array){if(f)return e.length?"":c(e);for(var n=0,i=e.length,s="";n<i;n++){var a={"@index":""+n,"@last":n===i-1,"@first":!n,".":e[n],this:e[n]};t=R(t,E,e[n],e[n],a),s+=c(t),t.path.pop()}return s}var p="object"==typeof e?e:t,o=!g&&u.options.helpers[h]||d(e)&&e;return o?o.apply(w(u,t),[c(t)].concat(l.split(/\s+/))):f&&!e||!f&&e?c(R(t,t.extra,p,p),{".":e,this:e}):void 0}}});