/**! @license schnauzer v1.1.0; Copyright (C) 2017-2018 by Peter Dematté */
!function(t,e){"object"==typeof exports?module.exports=e(t):"function"==typeof define&&define.amd?define("schnauzer",[],function(){return e(t)}):t.Schnauzer=e(t)}(this,function(t,d,e){"use strict";var r=function(t,e){this.version="1.1.0",this.options={tags:["{{","}}"],entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},doEscape:!0,helpers:{},partials:{},recursion:"self",characters:'$"<>%-=@°|./',splitter:"|##|"},n(this,e||{},t)},n=function(t,e,r){for(var n in e)t.options[n]=e[n];for(var i in 1,e=t.options,t.entityRegExp=function(t,e){for(var r in t)e+=r;return new RegExp("["+e+"]","g")}(e.entityMap,[]),t.stopRegExp=new RegExp(/^°+/),a(t,e.tags),t.partials={},e.partials)t.registerPartial(i,e.partials[i]);r&&t.registerPartial(e.recursion,r)},m=Array.isArray||function(t){return t&&t.constructor===Array},w=function(t){return t&&"function"==typeof t},S=Object.keys||function(t,e){for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e};return r.prototype={render:function(t,e){return this.partials[this.options.recursion](t,e)},parse:function(t){return this.partials[this.options.recursion]||this.registerPartial(this.options.recursion,t)},registerHelper:function(t,e){this.options.helpers[t]=e},unregisterHelper:function(t){delete this.options.helpers[t]},registerPartial:function(t,e){return this.partials[t]=function(p,t){var e="",o=[],r=function(){};for(;;){if(t=(e=t).replace(p.sectionRegExp,function(t,e,r,n,i,a,s){return n.match(/^(each|with|if|unless)$/)&&(n=n+"°"+i,i=""),s=s.split("{{else}}"),o.push(l(p,[c(p,s[0]),s[1]&&c(p,s[1])],n,i,"^"===r,o)),"{{-> "+(o.length-1)+"}}"}),e===t){r=c(p,t);break}o.push(d)}return function(t,e){return r((!t.__schnauzer||e)&&k(t,e)||t,o)}}(this,e)},unregisterPartial:function(t){delete this.partials[t]},setTags:function(t){a(this,t)}},r;function a(t,e){var r=t.options.tags="{{"===e[0]?["{{2,3}","}{2,3}"]:e,n=t.options.characters;t.variableRegExp=new RegExp("("+r[0]+")([>!&=]\\s*)*([\\w\\"+n+"\\.\\s*]+)*"+r[1],"g"),t.sectionRegExp=new RegExp("("+r[0]+")([#^])([\\w"+n+"]*)(?:\\s+([\\w$\\s"+n+"]*))*("+r[1]+")((?:(?!\\1[#^])[\\S\\s])*?)\\1\\/\\3\\5","g"),t.partRegExp=new RegExp(r[0]+"[#^]"),t.escapeRegExp=new RegExp(r[0])}function k(t,e,r,n){return{data:r||t.data||t,extra:[].concat(t.extra||[],e||[]),path:[].concat(t.path!==d?t.path:t,r||[]),helpers:[].concat(t.helpers||[],r&&(n||{})||[]),__schnauzer:!0}}function u(t,e){for(var r=0,n=e.length;r<n;r++)t=t&&t[e[r]];return t}function P(t,e,r,n){var i=t.path.length-1-n,a=t.path[i]||{},s=t.helpers[i-1]||{},p=s[e]!==d?s[e]:u(s,r);if(p===d&&(p=a[e]!==d?a[e]:u(a,r)),p!==d)return p;for(var o=t.extra.length;o--;){if(t.extra[o][e]!==d)return t.extra[o][e];if((p=u(t.extra[o],r))!==d)return p}}function b(t,e){var r=t.split(/\s*=\s*/),n=1<r.length?r[1]:r[0],i='"'===n.charAt(0)||"'"===n.charAt(0),a=0,s=[],p=!1;if(i)n=n.replace(/(?:^['"]|['"]$)/g,"");else{var o=n.split("../");1<o.length&&(n=("@"===o[0]?"@":"")+o.pop(),a=o.length),name=name.replace(/^(?:\.|this)\//,function(){return p=!0,""}),s=n.split(/[\.\/]/)}return{name:1<r.length?r[0]:n,value:i||!e?n:P(e,n,s,a),isString:i,isStrict:p,keys:s,depth:a}}function y(t,e){return String(t).replace(e.entityRegExp,function(t){return e.options.entityMap[t]})}function A(e,r,t){return{getData:function(t){return b(t,r)},escapeHtml:function(t){return y(t,e)}}}function z(t,e,r,n){return e&&(t[e[0]]=n,t[e[1]]=r),t}function c(h,g){var v=[],x=h.options;return g=g.replace(h.variableRegExp,function(t,e,r,n){var i,a=r&&r.charAt(0)||"",s=">"===a,p="",o=!1,u={};if("!"===a||"="===a)return"";if(p=(n=n.split(/\s+/)).shift(),s)for(var c=n.length,l={};c--;)u[(l=b(n[c])).name]=l;else o=(u=b(p)).isStrict,p=u.name;return i=p===x.recursion,s=s&&(!!h.partials[p]||i),v.push({value:s?h.partials[p]:p,data:s?u:n,isPartial:s,isUnescaped:!x.doEscape||"&"===a||h.escapeRegExp.test(e)&&3===e.length,isSelf:i,depth:s?d:u.depth,isStrict:o,keys:s?d:u.keys}),x.splitter}).split(x.splitter),function(t,e){for(var r,n,i,a,s=0,p=g.length,o="";s<p;s++)if(o+=g[s],(a=v[s])!==d)if("->"!==a.value){if(n=a.value,a.isPartial){var u={};for(var c in t.data)u[c]=t.data[c];for(var l in a.data)i=a.data[l],u[l]=i.isString?i.value:P(t,i.value,i.keys,i.depth);r=(n||h.partials[x.recursion])(k(u,t.extra))}else{r=P(t,n,a.keys,a.depth);var f=!a.isStrict&&x.helpers[n]||w(r)&&r;r=f?f.apply(A(h,t),a.data):r&&(a.isUnescaped?r:y(r,h))}r!==d&&(o+=r)}else o+=e[a.data[0]](t)||"";return o}}function l(l,f,h,g,v,x){var t=h.match(/^(each|with|if|unless)°/)||[],d="each"===t[1],y="unless"===t[1],E=y||"if"===t[1],R=h.split(/\s+as\s+\|/);return h=R.shift().split(/\s+/)[0],h=b(t[0]?h.replace(t[0],""):h),R=R[0]&&R[0].replace(/\|/g,"").split(/\s+/),function(t){var e=P(t,h.name,h.keys,h.depth),r=m(e),n=!r&&"object"==typeof e,i=d&&n&&e;if(e=y?!e:i?S(e,[]):e,r||i){if(v)return e.length?"":f[0](e,x);for(var a=0,s=e.length,p="";a<s;a++){var o=r?e[a]:i[e[a]];t=k(t,t.extra,o,z({"@index":""+a,"@last":a===s-1,"@first":!a,".":o,this:o,"@key":r?a:e[a]},R,r?a:e[a],o)),p+=f[0](t,x),t.path.pop(),t.helpers.pop()}return p}var u=n?e:t.data;console.log(u);var c=!h.isStrict&&l.options.helpers[h.name]||w(e)&&e;return c?c.apply(A(l,t),[f[0](t,x)].concat(g.split(/\s+/))):v&&!e||!v&&e?f[0](E?t:k(t,t.extra,u,z({".":e,this:e,"@key":h.name},R,h.name,e)),x):f[1]?f[1](t,x):void 0}}});