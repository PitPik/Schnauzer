/*! Schnauzer - v0.1.0 2017-07-13 */

!function(a,b){"object"==typeof exports?module.exports=b(a):"function"==typeof define&&define.amd?define("Schnauzer",[],function(){return b(a)}):a.Schnauzer=b(a)}(this,function(a,b){"use strict";function c(a,b){var c="{{"===b[0],d=c?["{{2,3}","}{2,3}"]:b;a.options.tags=d,a.variableRegExp=new RegExp("("+d[0]+")([>!&=]\\s*)*([\\w\\"+a.options.characters+"\\.\\s*]+)*"+d[1],"g"),a.sectionRegExp=new RegExp(d[0]+"(#|\\^)([\\w\\.]*)\\s*(.*?)"+d[1]+"([\\S\\s]*?)("+d[0]+")\\/\\2("+d[1]+")","g")}function d(a){return a&&a.constructor===Array}function e(a){return a&&"function"==typeof a}function f(a,b){for(var c=0,d=b.length;c<d;c++)a=a&&a[b[c]];return a}function g(a,c,d){if("string"==typeof d){var e=[],g=a[d]!==b?a[d]:f(a,e=d.split("."));if(g!==b)return g;for(var h=c.length;h--;){if(c[h][d]!==b)return c[h][d];if(g=f(c[h],e))return g}}}function h(a,b){return String(a).replace(b.entityRegExp,function(a){return b.options.entityMap[a]})}function i(a,b,c){return{getData:function(a){return g(b,c,a)},escapeHtml:function(b){return h(b,a)}}}function j(a,c){var d=[],f=a.options;return c=c.replace(a.variableRegExp,function(b,c,e,g){var h=e&&("!"===e[0]||"="===e[0]),i=!f.doEscape||"{{{"===c||e&&"&"===e[0],j=e&&">"===e[0],k=!1,l="",m={};if(h)return"";if(g=g.split(/\s+/),l=g.shift(g),j)for(var n=g.length,o=[];n--;)o=g[n].split("="),m[o[1]?o[0]:"$"+n]=(o[1]?o[1]:o[0]).replace(/"/g,"");return k=l===f.recursion,d.push(j&&(a.partials[l]||k)?[a.partials[l],m,j,i,k]:[l,g,null,i]),f.splitter}).split(f.splitter),function(j,k,l){l&&(k=[l].concat(k));for(var m,n,o=0,p=c.length,q="";o<p;o++)q+=c[o],d[o]!==b&&(n=d[o][0],!0===d[o][2]?m=(n||a.partials[f.recursion])(j,d[o][4]?null:k,d[o][1]):(m=j[n]!==b?j[n]:g(j,k,n),m=f.helpers[n]?f.helpers[n].apply(i(a,j,k),[""].concat(d[o][1])):e(m)?m.apply(i(a,j,k),[""].concat(d[o][1])):"executor"===n.name?n(j,k):m&&(d[o][3]?m:h(m,a))),m!==b&&(q+=m));return q}}function k(a,b,c,f,h){return function(j,k,l){var m=g(j,k,c);if(d(m)){if(h)return m.length?"":b(m,k);for(var n=0,o=m.length,p="";n<o;n++)p+="object"==typeof m[n]?b(m[n],[m[n]].concat(k)):b({".":m[n]},k);return p}return a.options.helpers[c]?a.options.helpers[c].apply(i(a,j,k),[b(j,k)].concat(f.split(/\s+/))):(l=j[c]||m,l&&e(l)?l.apply(i(a,j,k),[b(j,k)].concat(f.split(/\s+/))):h&&!l||!h&&l?b(j,k):void 0)}}function l(a,b){for(var c=a.options,d=[],f=[],g=[],h=-1,i=c.stopper,m=i+"\\d+"+i,n=b.replace(a.sectionRegExp,function(b,e,f,n,p,q,r){var s=q+e+f+n+r,t=p.lastIndexOf(s);return h++,-1!==t?(g.push(h--),s+p.substring(0,t)+q+e+f+i+o+i+r+p.substring(t+s.length)+q+"/"+f+i+o+++i+r):(f=f.replace(new RegExp(m),""),d.push(new RegExp(c.tags[0]+"[#^]").test(p)?k(a,l(a,p),f,n):k(a,j(a,p),f,n,"^"===e)),c.splitter)}).split(c.splitter),p=0,q=g.length;p<q;p++)n[g[p]]=l(a,n[g[p]]);for(var p=0,q=n.length;p<q;p++)f.push(e(n[p])?n[p]:j(a,n[p])),d[p]&&f.push(d[p]);return function(a,b,c){for(var d=0,e=f.length,g="";d<e;d++)g+=f[d](a,b||[a],c)||"";return g}}var m=function(a,b){this.version="0.1.0",this.options={tags:["{{","}}"],entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},doEscape:!0,helpers:{},partials:{},recursion:"self",characters:'$"<>%=@',splitter:"|##|",stopper:"__"},n(this,b||{},a)},n=function(a,b,d){for(var e in b)a.options[e]=b[e];b=a.options,a.entityRegExp=function(a,b){for(var c in a)b+=c;return new RegExp("["+b+"]","g")}(b.entityMap,[]),c(a,b.tags),a.partials={};for(var f in b.partials)a.registerPartial(f,b.partials[f]);d&&a.registerPartial(b.recursion,d)},o=0;return m.prototype={render:function(a,b){return this.partials[this.options.recursion](a,b&&[b])},parse:function(a){this.partials[this.options.recursion]||this.registerPartial(this.options.recursion,a)},registerHelper:function(a,b){this.options.helpers[a]=b},unregisterHelper:function(a){delete this.options.helpers[a]},registerPartial:function(a,b){return this.partials[a]=l(this,b)},unregisterPartial:function(a){delete this.options.partials[a]},setTags:function(a){c(this,a)}},m});
//# sourceMappingURL=schnauzer.js.map