/**! @license schnauzer v1.0.00; Copyright (C) 2017-2018 by Peter Dematté */
!function(t,e){"object"==typeof exports?module.exports=e(t):"function"==typeof define&&define.amd?define("schnauzer",[],function(){return e(t)}):t.Schnauzer=e(t)}(this,function(t,d,v){"use strict";var e=function(t,e){this.version="1.0.0",this.options={tags:["{{","}}"],entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},doEscape:!0,helpers:{},partials:{},recursion:"self",characters:'$"<>%-=@',splitter:"|##|"},r(this,e||{},t)},r=function(t,e,r){for(var n in e)t.options[n]=e[n];for(var i in v=1,e=t.options,t.entityRegExp=function(t,e){for(var r in t)e+=r;return new RegExp("["+e+"]","g")}(e.entityMap,[]),t.stopRegExp=new RegExp(/^°+/),a(t,e.tags),t.partials={},e.partials)t.registerPartial(i,e.partials[i]);r&&t.registerPartial(e.recursion,r)};return e.prototype={render:function(t,e){return this.partials[this.options.recursion](t,e)},parse:function(t){return this.partials[this.options.recursion]||this.registerPartial(this.options.recursion,t)},registerHelper:function(t,e){this.options.helpers[t]=e},unregisterHelper:function(t){delete this.options.helpers[t]},registerPartial:function(t,e){return this.partials[t]=function u(l,t){var c=l.options,f=[],a=[],h=[],g=-1,x="",e=t.replace(l.sectionRegExp,function(t,e,r,n,i,a,s){var p=a+e+r,o=i.lastIndexOf(p);return h.length?t:(g++,-1!==o?(h.push(g--),x=Array(++v).join("°"),p+n+s+i.substring(0,o)+a+e+x+r+i.substring(o+p.length)+a+"/"+x+r+s):(r=r.replace(l.stopRegExp,""),f.push(l.partRegExp.test(i)?P(l,u(l,i),r,n,"^"===e):P(l,w(l,i),r,n,"^"===e)),c.splitter))}).split(c.splitter);for(var r=0,n=h.length;r<n;r++)e[h[r]]=u(l,e[h[r]]);for(var r=0,n=e.length;r<n;r++)a.push(y(e[r])?e[r]:w(l,e[r])),f[r]&&a.push(f[r]);return function(t,e){t.__schnauzer&&!e||(t=E(t,e));for(var r=0,n=a.length,i="";r<n;r++)i+=a[r](t)||"";return i}}(this,e)},unregisterPartial:function(t){delete this.options.partials[t]},setTags:function(t){a(this,t)}},e;function a(t,e){var r=t.options.tags="{{"===e[0]?["{{2,3}","}{2,3}"]:e,n=t.options.characters;t.variableRegExp=new RegExp("("+r[0]+")([>!&=]\\s*)*([\\w\\"+n+"\\.\\s*]+)*"+r[1],"g"),t.sectionRegExp=new RegExp(r[0]+"(#|\\^)([\\w"+n+"]*)\\s*(.*?)"+r[1]+"([\\S\\s]*?)("+r[0]+")\\/\\2("+r[1]+")","g"),t.partRegExp=new RegExp(r[0]+"[#^]"),t.escapeRegExp=new RegExp(r[0])}function y(t){return t&&"function"==typeof t}function E(t,e,r,n){return{data:r||t.data||t,extra:e&&[e]||t.extra||[],path:[].concat(t.path!==d?t.path:t,r||[]),helpers:n||{},__schnauzer:!0}}function u(t,e){for(var r=0,n=e.length;r<n;r++)t=t&&t[e[r]];return t}function R(t,e,r,n){var i=[],a=t.path.length-1-n,s=t.path[a]||{},p=t.helpers[e]!==d?t.helpers[e]:s[e]!==d?s[e]:u(s,i=r||e.split(/[\.\/]/));if(p!==d)return p;for(var o=t.extra.length;o--;){if(t.extra[o][e]!==d)return t.extra[o][e];if((p=u(t.extra[o],i))!==d)return p}}function S(t,e){var r=t.split(/\s*=\s*/),n=1<r.length?r[1]:r[0],i='"'===n[0]||"'"===n[0],a=0,s=[],p=!1;if(i)n=n.replace(/(?:^['"]|['"]$)/g,"");else{var o=n.split("../");1<o.length&&(n=o.pop(),a=o.length),name=name.replace(/^(?:\.|this)\//,function(){return p=!0,""}),s=n.split(/[\.\/]/)}return{name:1<r.length?r[0]:n,value:i||!e?n:R(e,n,s,a),isString:i,isStrict:p,keys:s,depth:a}}function c(t,e){return String(t).replace(e.entityRegExp,function(t){return e.options.entityMap[t]})}function m(e,r,t){return{getData:function(t){return S(t,r)},escapeHtml:function(t){return c(t,e)}}}function w(g,l){var x=[],v=g.options;return l=l.replace(g.variableRegExp,function(t,e,r,n){var i,a=r&&r[0]||"",s="!"===a||"="===a,p=!v.doEscape||"&"===a||g.escapeRegExp.test(e)&&3===e.length,o=">"===a,u="",l=!1,c={};if(s)return"";if(u=(n=n.replace(/^(?:\.|this)\//,function(){return l=!0,""}).split(/\s+/)).shift(),o)for(var f=n.length,h={};f--;)c[(h=S(n[f])).name]=h;else u=(c=S(u)).name;return i=u===v.recursion,o=o&&(!!g.partials[u]||i),x.push({value:o?g.partials[u]:u,data:o?c:n,isPartial:o,isUnescaped:p,isSelf:i,depth:o?d:c.depth,isStrict:l,keys:o?d:c.keys}),v.splitter}).split(v.splitter),function(t){for(var e,r,n,i,a,s=0,p=l.length,o="";s<p;s++)if(o+=l[s],x[s]!==d){if(r=(a=x[s]).value,!0===a.isPartial){for(var u in t.data=JSON.parse(JSON.stringify(t.data)),a.data)n=a.data[u],t.data[u]=n.isString?n.value:R(t,n.value,n.keys,n.depth);e=(r||g.partials[v.recursion])(E(t.data,t.extra))}else e=R(t,r,a.keys,a.depth),e=(i=!a.isStrict&&v.helpers[r]||y(e)&&e)?i.apply(m(g,t),a.data):r.isExecutor?r(t):e&&(a.isUnescaped?e:c(e,g));e!==d&&(o+=e)}return o}}function P(u,l,c,f,h){return c=S(c),function(t){var e,r=R(t,c.name,c.keys,c.depth);if((e=r)&&e.constructor===Array){if(h)return r.length?"":l(r);for(var n=0,i=r.length,a="";n<i;n++){var s={"@index":""+n,"@last":n===i-1,"@first":!n,".":r[n],this:r[n]};t=E(t,t.extra,r[n],s),a+=l(t),t.path.pop()}return a}var p="object"==typeof r?r:t,o=!c.isStrict&&u.options.helpers[c.name]||y(r)&&r;return o?o.apply(m(u,t),[l(t)].concat(f.split(/\s+/))):h&&!r||!h&&r?l(E(t,t.extra,p,{".":r,this:r})):void 0}}});