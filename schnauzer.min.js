/**! @license schnauzer v1.1.0; Copyright (C) 2017-2018 by Peter Dematt√© */
!function(t,e){"object"==typeof exports?module.exports=e(t):"function"==typeof define&&define.amd?define("schnauzer",[],function(){return e(t)}):t.Schnauzer=e(t)}(this,function(t,d){"use strict";var e=function(t,e){this.version="1.1.0",this.options={tags:["{{","}}"],entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},doEscape:!0,helpers:{},partials:{},recursion:"self",characters:'$"<>%-=@',splitter:"|##|"},r(this,e||{},t)},r=function(t,e,r){for(var n in e)t.options[n]=e[n];for(var i in e=t.options,t.entityRegExp=function(t,e){for(var r in t)e+=r;return new RegExp("["+e+"]","g")}(e.entityMap,[]),a(t,e.tags),t.partials={},e.partials)t.registerPartial(i,e.partials[i]);r&&t.registerPartial(e.recursion,r)},y=Array.isArray||function(t){return t&&t.constructor===Array},x=function(t){return t&&"function"==typeof t},m=Object.keys||function(t,e){for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e};return e.prototype={render:function(t,e){return this.partials[this.options.recursion](t,e)},parse:function(t){return this.partials[this.options.recursion]||this.registerPartial(this.options.recursion,t)},registerHelper:function(t,e){this.options.helpers[t]=e},unregisterHelper:function(t){delete this.options.helpers[t]},registerPartial:function(t,e){return this.partials[t]=function(o,r){var t="",p=[];for(;t!==r&&(t=r);)r=r.replace(o.sectionRegExp,function(t,e,r,n,i,a,s){return s=s.split("{{else}}"),p.push(l(o,[c(o,s[0]),s[1]&&c(o,s[1])],n,i&&i.replace(/\|/g,"").split(/\s+/)||[],"^"===r,p)),"{{-section- "+(p.length-1)+"}}"});return r=c(o,r),function(t,e){return r(!t.__schnauzer||e?E(t,e):t,p)}}(this,e)},unregisterPartial:function(t){delete this.partials[t]},setTags:function(t){a(this,t)}},e;function a(t,e){var r=t.options.tags="{{"===e[0]?["{{2,3}","}{2,3}"]:e,n=t.options.characters;t.variableRegExp=new RegExp("("+r[0]+")([>!&=]\\s*)*([\\w\\"+n+"\\.\\s*]+)*"+r[1],"g"),t.sectionRegExp=new RegExp("("+r[0]+")([#^])([\\w"+n+"]*)(?:\\s+([\\w$\\s|./"+n+"]*))*("+r[1]+")((?:(?!\\1[#^])[\\S\\s])*?)\\1\\/\\3\\5","g")}function E(t,e,r,n){return{data:r||t.data||t,extra:[].concat(t.extra||[],e||[]),path:[].concat(t.path!==d?t.path:t,r||[]),helpers:[].concat(t.helpers||[],r&&(n||{})||[]),__schnauzer:!0}}function u(t,e){for(var r=0,n=e.length;r<n;r++)t=t&&t[e[r]];return t}function S(t,e,r,n){var i=t.path.length-1-n,a=t.path[i]||{},s=t.helpers[i-1]||{},o=s[e]!==d?s[e]:u(s,r);if(o===d&&(o=a[e]!==d?a[e]:u(a,r)),o!==d)return o;for(var p=t.extra.length;p--;){if(t.extra[p][e]!==d)return t.extra[p][e];if((o=u(t.extra[p],r))!==d)return o}}function k(t,e){var r=t.split(/\s*=\s*/),n=1<r.length?r[1]:r[0],i='"'===n.charAt(0)||"'"===n.charAt(0),a=0,s=[],o=!1;if(i)n=n.replace(/(?:^['"]|['"]$)/g,"");else{var p=n.split("../");1<p.length&&(n=("@"===p[0]?"@":"")+p.pop(),a=p.length),name=name.replace(/^(?:\.|this)\//,function(){return o=!0,""}),s=n.split(/[\.\/]/)}return{name:1<r.length?r[0]:n,value:i||!e?n:S(e,n,s,a),isString:i,isStrict:o,keys:s,depth:a}}function R(t,e){return String(t).replace(e.entityRegExp,function(t){return e.options.entityMap[t]})}function w(e,r,t){return{getData:function(t){return k(t,r)},escapeHtml:function(t){return R(t,e)}}}function P(t,e,r,n){return e&&(t[e[0]]=n,t[e[1]]=r),t}function c(f,h){var g=[],v=f.options;return h=h.replace(f.variableRegExp,function(t,e,r,n){var i,a=r&&r.charAt(0)||"",s=">"===a,o="",p=!1,u={};if("!"===a||"="===a)return"";if("-section-"===(o=(n=n.split(/\s+/)).shift()))return g.push({section:n[0]}),v.splitter;if(s)for(var c=n.length,l={};c--;)u[(l=k(n[c])).name]=l;else p=(u=k(o)).isStrict,o=u.name;return i=o===v.recursion,s=s&&(!!f.partials[o]||i),g.push({value:s?f.partials[o]:o,data:s?u:n,isPartial:s,isUnescaped:!v.doEscape||"&"===a||"{{{"===e,isSelf:i,depth:s?d:u.depth,isStrict:p,keys:s?d:u.keys}),v.splitter}).split(v.splitter),function(t,e){for(var r,n,i,a,s,o=0,p=h.length,u="";o<p;o++)if(u+=h[o],(s=g[o])!==d)if(s.section)u+=e[s.section](t)||"";else{if(s.isPartial){for(var c in a={},t.data)a[c]=t.data[c];for(var l in s.data)i=s.data[l],a[l]=i.isString?i.value:S(t,i.value,i.keys,i.depth);r=(s.value||f.partials[v.recursion])(E(a,t.extra))}else r=S(t,s.value,s.keys,s.depth),r=(n=!s.isStrict&&v.helpers[s.value]||x(r)&&r)?n.apply(w(f,t),s.data):r&&(s.isUnescaped?r:R(r,f));r!==d&&(u+=r)}return u}}function l(u,c,l,f,h,g){var v=l;l=k(/^(each|with|if|unless)/.test(l)?f.shift():l);var d="as"===f[0]&&[f[1],f[2]];return function(t){var e=S(t,l.name,l.keys,l.depth),r=y(e),n="each"===v&&!r&&"object"==typeof e&&e;if(e="unless"===v?!e:n?m(e,[]):e,r||n){if(h)return e.length?"":c[0](e,g);for(var i,a=0,s=e.length,o="";a<s;a++)i=r?e[a]:n[e[a]],t=E(t,t.extra,i,P({"@index":""+a,"@last":a===s-1,"@first":!a,".":i,this:i,"@key":r?a:e[a]},d,r?a:e[a],i)),o+=c[0](t,g),t.path.pop(),t.helpers.pop();return o}var p=!l.isStrict&&u.options.helpers[l.name]||x(e)&&e;return p?p.apply(w(u,t),[c[0](t,g)].concat(f)):h&&!e||!h&&e?c[0]("unless"===v||"if"===v?t:E(t,t.extra,e,P({".":e,this:e,"@key":l.name},d,l.name,e)),g):c[1]&&c[1](t,g)}}});