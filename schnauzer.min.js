/*! Schnauzer - v0.1.0 2017-05-01 */

!function(a,b){"object"==typeof exports?module.exports=b(a):"function"==typeof define&&define.amd?define("Schnauzer",[],function(){return b(a)}):a.Schnauzer=b(a)}(this,function(a,b){"use strict";function c(a,b){var c="{{"===b[0],d=c?["{{2,3}","}{2,3}"]:b;a.options.tags=d,a.variableRegExp=new RegExp("("+d[0]+")([>!&=]\\s*)*([\\w\\"+a.options.characters+"\\.\\s*]+)*"+d[1],"g"),a.sectionRegExp=new RegExp(d[0]+"(#|\\^)([\\w\\.]*)\\s*(.*?)"+d[1]+"([\\S\\s]*?)("+d[0]+")\\/\\2("+d[1]+")","g")}function d(a){return a&&a.constructor===Array}function e(a,b){for(var c=0,d=b.length;c<d;c++)a=a&&a[b[c]];return a}function f(a,c,d){if("string"==typeof d){var f=[],g=a[d]!==b?a[d]:e(a,f=d.split("."));if(g!==b)return g;for(var h=c.length;h--;){if(c[h][d]!==b)return c[h][d];if(g=e(c[h],f))return g}}}function g(a,b){return String(a).replace(b.entityRegExp,function(a){return b.options.entityMap[a]})}function h(a,b,c){return{getData:function(a){return f(b,c,a)},escapeHtml:function(b){return g(b,a)}}}function i(a,c){var d=[],e=a.options;return c=c.replace(a.variableRegExp,function(b,c,f,g){var h=f&&("!"===f[0]||"="===f[0]),i=!e.doEscape||"{{{"===c||f&&"&"===f[0],j=f&&">"===f[0],k=!1,l="",m={};if(h)return"";if(g=g.split(/\s+/),l=g.shift(g),j)for(var n=g.length,o=[];n--;)o=g[n].split("="),m[o[1]?o[0]:"$"+n]=(o[1]?o[1]:o[0]).replace(/"/g,"");return k=l===e.recursion,d.push(j&&(a.partials[l]||k)?[a.partials[l],m,j,i,k]:[l,g,null,i]),e.splitter}).split(e.splitter),function(i,j,k){k&&(j=[k].concat(j));for(var l,m,n=0,o=c.length,p="";n<o;n++)p+=c[n],d[n]!==b&&(m=d[n][0],!0===d[n][2]?l=(m||a.partials[e.recursion])(i,d[n][4]?null:j,d[n][1]):(l=i[m]!==b?i[m]:f(i,j,m),l=e.helpers[m]?e.helpers[m].apply(h(a,i,j),[""].concat(d[n][1])):"function"==typeof l?l.apply(h(a,i,j),[""].concat(d[n][1])):"executor"===m.name?m(i,j):l&&(d[n][3]?l:g(l,a))),l!==b&&(p+=l));return p}}function j(a,b,c,e,g){return function(i,j,k){if(d(i[c])){if(i=i[c],g)return i.length?"":b(i,j);for(var l=0,m=i.length,n="";l<m;l++)n+="object"==typeof i[l]?b(i[l],[i[l]].concat(j)):b({".":i[l]},j);return n}return a.options.helpers[c]?a.options.helpers[c].apply(h(a,i,j),[b(i,j)].concat(e.split(/\s+/))):(k=i[c]||f(i,j,c),k&&"function"==typeof k?k.apply(h(a,i,j),[b(i,j)].concat(e.split(/\s+/))):g&&!k||!g&&k?b(i,j):void 0)}}function k(a,b){for(var c=a.options,d=[],e=[],f=[],g=-1,h=c.stopper,l=h+"\\d+"+h,m=b.replace(a.sectionRegExp,function(b,e,m,o,p,q,r){var s=q+e+m+o+r,t=p.lastIndexOf(s);return g++,-1!==t?(f.push(g--),s+p.substring(0,t)+q+e+m+h+n+h+r+p.substring(t+s.length)+q+"/"+m+h+n+++h+r):(m=m.replace(new RegExp(l),""),d.push(new RegExp(c.tags[0]+"[#^]").test(p)?j(a,k(a,p),m,o):j(a,i(a,p),m,o,"^"===e)),c.splitter)}).split(c.splitter),o=0,p=f.length;o<p;o++)m[f[o]]=k(a,m[f[o]]);for(var o=0,p=m.length;o<p;o++)e.push("function"==typeof m[o]?m[o]:i(a,m[o])),d[o]&&e.push(d[o]);return function(a,b,c){for(var d=0,f=e.length,g="";d<f;d++)g+=e[d](a,b||[a],c)||"";return g}}var l=function(a,b){this.version="0.1.0",this.options={tags:["{{","}}"],entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},doEscape:!0,helpers:{},partials:{},recursion:"self",characters:'$"<>%=@',splitter:"|##|",stopper:"__"},m(this,b||{},a)},m=function(a,b,d){for(var e in b)a.options[e]=b[e];b=a.options,a.entityRegExp=function(a,b){for(var c in a)b+=c;return new RegExp("["+b+"]","g")}(b.entityMap,[]),c(a,b.tags),a.partials={};for(var f in b.partials)a.registerPartial(f,b.partials[f]);d&&a.registerPartial(b.recursion,d)},n=0;return l.prototype={render:function(a){return this.partials[this.options.recursion](a)},parse:function(a){this.partials[this.options.recursion]||this.registerPartial(this.options.recursion,a)},registerHelper:function(a,b){this.options.helpers[a]=b},unregisterHelper:function(a){delete this.options.helpers[a]},registerPartial:function(a,b){return this.partials[a]=k(this,b)},unregisterPartial:function(a){delete this.options.partials[a]},setTags:function(a){c(this,a)}},l});
//# sourceMappingURL=schnauzer.js.map