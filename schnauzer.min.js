/**! @license schnauzer v3.0.0; Copyright (C) 2017-2025 by Peter Dematt√© */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(e):"function"==typeof define&&define.amd?define([],function(){return t(e)},"schnauzer"):"object"==typeof exports?exports.Schnauzer=t(e):e.Schnauzer=t(e)}(this&&this.window||global,function(e){"use strict";var o=Object.keys||function(e){var t=[],r="";for(r in e)hasOwnProperty.call(e,r)&&t.push(r);return t},u=function(e,t){for(var r in t)n=t,e[s=r]=n[s];var n,s;return e},d=function(){throw"Schnauzer Error: Incorrect template"},s=e.console,y={start:/^\s+/,end:/\s+$/,whitespace:/\s+/},t=function(e,t){this.version="3.0.0",this.partials={},this.helpers={lookup:f,log:function(e){for(var t=0,r=arguments.length,n=[];t<r;t++)t===r-1?e=arguments[t]:n.push(arguments[t]);(s[e.hash.level]||s.log).apply(s,n)}},this.regex={tags:null,entity:null},this.controls={partialBlocks:[]},this.options={entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},helpers:{},partials:{},self:"self",escapeHTML:!0,limitPartialScope:!0,strictArguments:!0,loopHelper:null,renderHook:null},r(this,t||{},e)},r=function(e,t,r){"string"!=typeof r&&(t=r,r=void 0),t=u(e.options,t),e.regex.tags=/({{2,3})([#~^/!>*-]*)\s*([^~}]*)([~}]{2,4})/,e.regex.entity=new RegExp("["+o(e.options.entityMap).join("")+"]","g"),e.helpers=u(e.helpers,t.helpers),e.registerPartial(t.partials),void 0!==r&&e.parse(r),delete t.helpers,delete t.partials},h=function(e){this.string=e};return h.prototype.toString=h.prototype.toHTML=function(){return""+this.string},t.prototype={render:function(e,t){var r=[{context:e,helpers:w(this,[{context:e}],e),vars:{}}];return z(this,this.partials[this.options.self],{scopes:r,extra:t||{},$vars:{},$alias:{}})},parse:function(e){return this.registerPartial(this.options.self,e)},registerHelper:function(e,t){if("string"==typeof e)return this.helpers[e]=t;for(var r in e)this.helpers[r]=e[r]},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if("string"==typeof e)return this.partials[e]=this.partials[e]||(t.constructor===Array?t:function(e,t){for(var r=t.split(e.regex.tags),n=[{text:L(r[0],"",r[2])}],s="",a="",i=[],l="",o=!1,p=!1,u="",h={if:!0,unless:!0,each:!0,with:!0},c=[],f=e.options.strictArguments,v=1,g=r.length;v<g;v+=5)s=r[v],a=r[v+1].replace("~",""),"\\"!==r[v-1].slice(-1)?("^~"===a&&(a="^",r[v+3]+="~"),l=L(r[v+4],r[v+3],r[v+6]||""),"!"!==a[0]?(i=r[v+2].split(y.whitespace),o=-1!==a.indexOf(">"),p=-1!==a.indexOf("#"),"/"===a&&i[0]===c[0]||"#*"===a?n=A(e,c,n,i,l):("^"!==a||i[0]?"^"===a&&i.unshift("unless"):(a="",i=["else"]),n=M(n,"/"===a?{close:i[0],text:l}:{block:p||"^"===a,partial:o,alts:"else"===i[0]?!!i.shift()&&null:[],helper:u=h[i[0]]?i.shift():"",vars:O(i.join(" "),[],o,!!u,f),escape:s.lastIndexOf("{{")<1&&!o,text:p?"":l,children:p?[{text:l}]:[]}))):n.push({text:l})):P(r,n,v);n.__parent&&d();return n}(this,t));for(var r in e)this.registerPartial(r,e[r])},unregisterPartial:function(e){delete this.partials[e]}},t;function c(t,e,r){return null==e?"":e.constructor===h?e.toString():r&&t.options.escapeHTML?String(e).replace(t.regex.entity,function(e){return t.options.entityMap[e]}):e}function f(e,t){var r=e[t];return null==r?r:Object.prototype.hasOwnProperty.call(e,t)?r:void 0}function S(t,e,r){var n=t.scopes[0],s=r?{}:null,a=u({},t.$vars);if(r)for(var i in n.$vars)a[i]=s[i]=n.$vars[i],n.vars[i]=void 0;if(n.$alias)for(var i in n.$alias)t.$alias.hasOwnProperty(i)||(t.$alias[i]=n.vars[i]);return u(a,t.$alias),t.scopes.unshift({context:void 0===e?{}:e,helpers:n.helpers,vars:a,$alias:t.$alias,$vars:t.$vars}),t.$vars={},t.$alias={},function(){if(t.scopes.shift(),r)for(var e in s)n.vars[e]=s[e]}}function w(e,t,r,n,s,a,i){return i?{"@index":s,"@number":s+1,"@key":a,"@odd":s%2!=0,"@last":s===i-1,"@first":0===s,"@length":i,"@depth":e.options.limitPartialScope?void 0:t.length-2,"@loop":n,"@parent":t[1].context,"@root":t[t.length-1].context,this:r}:{"@parent":n,"@root":t[t.length-1].context,this:r}}function x(e,t,r,n){if(e.name){if("includeZero"===e.name)return n[0].zero=e.value;t.$vars[e.name]=r.value,r.alias=e.name}else for(var s=0,a=e.alias.length;s<a;s++)t.$alias[e.alias[s]]=n[s]?n[s].value:void 0}function k(e,t,r){var n,s,a=e.value,i=e.type,l="key"!==i&&"helper"!==i,o="this"===a;return e.path.length&&(t=b(e,t,{}).parent),n=t&&void 0!==t[a]||!1,s=l||o||!n,{value:o?t:l?a:t&&t[a],type:l?i:void 0,parent:s?void 0:t,active:s||"helper"===i?0:e.active,key:l?"":a,alias:"",args:[],isLoop:r||!1,helper:e.enclosed}}function b(e,t,r){for(var n,s=0,a=e.path.length;s<a;s++)if(!(t=t[e.path[s]]))return r;return void 0===(n=t[e.value])||(r.value=n,r.parent=t),r}function H(e,t,r){for(var n,s,a,i,l=[],o={},p=r.scopes,u=null,h={},c={},f=null,v=!1,g="each"===t.helper,d=0,y=t.vars.length;d<y;d++)v=!!(o=t.vars[d]).name||!!o.alias.length,(u=p[o.depth])?(o.strict||(f=e.helpers[o.value]),f&&"string"!==o.type&&(o.type="helper"),h="@"===o.value[0]||"@"===(o.path[0]||"")[0]?u.helpers:f?e.helpers:u.context,l.push(c=k(o,h,g)),"helper"===o.type&&(n=e,s=r,a=c,i=o,!d&&(i.helper=!0),a.args=H(n,{vars:i.args},s)),v&&void 0!==c.value||b(o,u.vars,c),void 0===c.value&&b(o,r.extra,c),c.type||(c.type=c.value&&c.value.constructor===Array?"array":typeof c.value),d||"array"!==c.type||t.helper||(c.isLoop=!0),v&&x(o,r,c,l)):l.push(k(o,h));return l}function j(e,t,r,n){var s="each"===r,a="if"===r||"unless"===r,i="number"===e.type||"string"===e.type,l="object"===e.type&&null!==e.value;return n||(n={}),"array"===e.type?!!e.value.length:l?!s||!!(n.keys=o(e.value)).length:!(!e.zero||0!==e.value)||(!a&&i?void 0!==t:!!t)}function v(e,t,r,n,s){var a,i=S(r,t),l=r.scopes[0],o=l.context;if(!s.SafeString&&s.data)for(var p in s.data)r.scopes[0].vars["@"+p]=s.data[p];return l.context=t,a=z(e,n,r),l.context=o,i(),a}function i(e,t,r,n){var s=r.scopes,a="",i=t[0],l=i.key||i.value,o=i.helper?_(e,n,i,r):l,p="@partial-block"===o,u=e.controls.partialBlocks,h=p?u[0]:n.children,c=p?null:e.partials[o],f=e.options.limitPartialScope,v=S(r,t[1]&&!t[1].alias?t[1].value:s[0].context,!c);return n.block&&c||(a=z(e,h,r)),n.block&&u.unshift(n.children),f&&(r.scopes=[s[0]]),c&&(a+=z(e,c,r)),f&&(r.scopes=s),n.block&&u.shift(),v&&v(),a}function _(e,t,r,n){var s=[],a=r.args,i=null,l=0,o=a.length,p=n.scopes[0].context;if(!r.value||!r.value.apply)return r.value;for(;l<o;l++)(i=a[l]).helper?s.push(_(e,t,i,n)):i.alias||s.push(i.value);return"$"!==r.key[0]&&"helper"===t.vars[0].type&&s.push(function(s,a,e,i){var t=i.scopes[0].helpers,l={name:e.key,data:{},hash:{},lookupProperty:f,createFrame:function(e){return u({},e)},escapeExpression:function(e){return c(s,e,!0)},SafeString:h},r=null;for(var n in t)"@"===n[0]&&void 0!==t[n]&&(l.data[n.substring(1)]=t[n]);for(var o=e.args.length;o--;)(r=e.args[o]).alias&&(l.hash[r.alias]=r.value);return a.block&&(l.fn=function(e,t){return v(s,e,i,a.children,t||l)},l.inverse=a.alts[0]?function(e,t){var r=a.alts,n=r[1]?u({},r[0]):null;return n&&(n.alts=r.slice(1),r=[n]),v(s,e,i,r,t||l)}:function(){return""}),l}(e,t,r,n)),r.value.apply(p,s)}function l(e,t,r,n){var s,a,i,l,o,p,u,h,c,f,v,g,d=t[0],y="unless"===n.helper,x=_(e,n,d,r),k={keys:[]},b=j(d,x,n.helper,k),m=n.alts,$=0,O=m.length,P=n;if(b===y)for(;$<O;$++)if(y="unless"===(n=m[$]).helper,(b=j(d,x=n.helper?_(e,n,d=H(e,n,r)[0],r):z(e,n.children,r),n.helper))!==y){$++;break}return P.index=$,"with"===n.helper&&x?(s=e,i=n,o=S(a=r,x),l=z(s,i.children,a),o(),l):d.isLoop&&x?function(e,t,r,n,s,a){for(var i="",l=e.options.loopHelper,o=S(r,t),p=r.scopes,u=p[0],h="array"===n.type,c=h?t:a.keys,f=s.vars[0].alias,v=0,g="",d=c.length;v<d;v++)g=h?v:c[v],u.helpers=w(e,p,t[g],t,v,g,d),u.context=t[g],f[0]&&(u.vars[f[0]]=t[g]),f[1]&&(u.vars[f[1]]=g),i+=l?l(e,r,c,t,n,g,s,z,w):z(e,s.children,r);return o(),i}(e,x,r,d,n,k):b!==y?(p=e,h=r,c=x,f=0!==(u=n).vars.length&&"helper"!==u.vars[0].type,v=f&&!u.helper?S(h,c):null,g=u.text,g+=u.helper||f?z(p,u.children,h):c,v&&v(),g):n.alts?"":n.text}function p(e,t,r,n){var s=e.options.renderHook,a=t.partial?i(e,n,r,t):l(e,n,r,t);return s?s(e,r,t,n,a,p,z):a}function g(e,t,r,n){var s=e.options.renderHook,a=t.partial?i(e,n,r,t):"function"===n[0].type?_(e,t,n[0],r):n[0].value;return a=c(e,a,t.escape)+t.text,s?s(e,r,t,n,a,g,z):a}function z(e,t,r){for(var n="",s={},a=0,i=t.length;a<i;a++)(s=t[a]).vars?n+=(s.block?p:g)(e,s,r,H(e,s,r)):n+=s.text;return n}function m(e,t,r){return!((e&&" "!==e||t&&" "!==t)&&")"!==t&&"="!==r)}function $(e,t,r,n){return t?(e.value=(a=e,"true"===(s=t)?(a.type="boolean",!0):"false"===s?!(a.type="boolean"):isNaN(s)||""===s?s:(a.type="number",+s)),"helper"!==e.type&&n.length?n[0].push(e):r.push(e),{active:0,alias:[],args:[],depth:0,name:"",helper:!1,path:[],strict:!1,type:"key",value:"",enclosed:!1}):e;var s,a}function O(e,t,r,n,s){for(var a={active:0,alias:[],args:[],depth:0,name:"",helper:!1,path:[],strict:!1,type:"key",value:"",enclosed:!1},i="",l="",o="",p="",u=!1,h=[],c=0,f=e.length;c<f;c++)if('"'===(l=e[c])||"'"===l)"\\"!==e[c-1]||'"'!==l&&"'"!==l?l===p?(m(o,e[c+1],o)&&(a.type="string",a=$(a,i,t,h),i=""),p=""):p?i+=l:(p=l,o=e[c-1]):i=i.substring(0,i.length-1)+l;else if(p)i+=l;else if("["===l||"]"===l)u="["===l;else if(u)i+=l;else if(-1===" a./@=()%|".indexOf(l))i+=l;else if("a"===l)" as "===e.substring(c-1,c+3)?c+=2:i+=l;else if(" "===l)a=$(a,i,t,h),i="";else if("."===l&&"../"===e.substring(c,c+3))a.depth++,a.strict=!0,c+=2;else if("/"===l||"."===l){if("."===l&&m(e[c-1],e[c+1])){a=$(a,"this",t,h);continue}i&&"this"!==i&&a.path.push(i),a.strict=!0,i=""}else"@"===l&&"@parent"===e.substring(c,c+7)?(-1!=="./".indexOf(e[c+7])?(a.depth++,a.strict=!0):i+="@parent",c+=6):"="===l?(a.name=i||t.pop().value,i=""):"("===l?(a.type="helper",a.enclosed=!0,h.unshift(a.args)):")"===l?(a=$(a,i,t,h),h.shift(),h.length&&h[0].push(t.pop()),i=""):"%"===l?a.active++:"|"===l?(c+=(i=(i=e.substring(c+1)).substring(0,i.indexOf(l))).length+1,t[t.length-1].alias=L(i,"~","~").split(" "),i=""):i+=l;if(h.length&&d(),$(a,i,t,h),r||!t.length)return t;if(n||(t[0].type="key"),t[1]&&"key"===t[0].type){if(t[0].type="helper",s)for(c=1,f=t.length;c<f;c++)"key"===t[c].type&&(t[c].strict=!0);t[0].args=t.splice(1)}return t}function P(e,t,r){var n=t[t.length-1],s=n.text;n.text=s.substring(0,s.length-1),t.push({text:e.slice(r,r+5).join("")})}function L(e,t,r){return-1!==t.indexOf("~")&&(e=e.replace(y.start,"")),r&&-1!==r.indexOf("~")?e.replace(y.end,""):e}function n(e,t){return t.children.__parent=e,t.children}function a(e){var t=e.__parent;return t||d(),delete e.__parent,t}function M(e,t){var r;return t.close?(function(e,t){for(var r=e.length;r--&&!e[r].alts;);return t===e[r].helper||t===e[r].block||t===e[r].vars[0].value}(e=a(e),t.close)||d(),e[e.length-1].partial&&((r=e[e.length-1]).children.unshift({text:r.text}),r.text=""),e[e.length-1].index=0,e.push({text:t.text})):t.block?(e.push(t),e=n(e,t)):t.alts?e.push(t):(t.block=!0,(e=a(e))[e.length-1].alts.push(t),e=n(e,t)),e}function A(e,t,r,n,s){var a={};return n[1]?(t.unshift(n[0]),M(r,{block:n[0],name:n[1].replace(/['"]/g,""),children:[],text:s,alts:[]})):((a=(r=M(r,{close:n[0],text:s})).splice(-2,1)[0]).children.unshift({text:a.text}),e.registerPartial(a.name,a.children),t.shift(),r)}});