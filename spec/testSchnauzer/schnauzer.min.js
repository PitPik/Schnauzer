!function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("schnauzer",[],function(){return t(e)}):e.Schnauzer=t(e)}(this&&this.window||global,function(e,t){"use strict";function r(e,t){var r="{{"===t[0]?["({{2,3}~*)","(~*}{2,3})"]:t,n=e.options.characters+"\\][",s=(r[0]+"\\/\\3"+r[1]).replace(/[()]/g,""),i=e.options.useMustageUnless?"[#^]":"[#]";e.inlineRegExp=new RegExp(r[0]+"([>!&=])*\\s*([\\w\\"+n+"\\.]+)\\s*([\\w"+n+"|\\.\\s]*)"+r[1],"g"),e.sectionRegExp=new RegExp(r[0]+"([#^][*%]*)\\s*([\\w"+n+"]*)(?:\\s+([\\w$\\s|./"+n+"]*))*"+r[1]+"((?:(?!"+r[0]+i+")[\\S\\s])*?)("+s+")","g"),e.elseSplitter=new RegExp(r[0]+"(?:else|\\^)\\s*(.*?)"+r[1])}function n(e,t,r){return r?String(e).replace(t.entityRegExp,function(e){return t.options.entityMap[e]}):e}function s(e,t){for(var r=0,n=e.length;n>r;r++)t[t.length]=e[r];return t}function i(e,r,n,s,i){var a={"@index":""+e,"@last":e===n-1,"@first":0===e,"@length":n,"@key":""+r,"this":""+s,".":""+s};if(i)for(var o in i)a[o]===t&&(a[o]=""+i[o]);return a}function a(e,t,r){var n=t.parentDepth,i=t.path,a=e.scopes;if(!a[0].scope[i[0]]&&(a[0].helpers[i[0]]||e.extra[i[0]]))return a;for(a=s(e.scopes,[]);a.length&&n--;)a.shift();for(var o=0,u=i.length,l=a[0].scope;u>o;o++)a.unshift({scope:l=l[i[o]],helpers:r});return a}function o(e,r,n){var s=r.root||{},i=s.variable||{},o={extra:e.extra,scopes:e.scopes};return s.variable===t?{extra:r,scopes:[{scope:e,helpers:{"@root":e}}]}:{extra:e.extra,scopes:n?e.scopes:a(o,i,{})}}function u(e,t){for(var r=0,n=t.path.length;n>r;r++)if(e=e[t.path[r]],!e)return;return e[t.value]}function l(e,t,r){var n=r.variable.root,s={key:n,value:e.helpers[n],type:"helper"},i=c(e,s,t,{vars:r.variable.vars},null);return{key:n,value:i,type:""}}function p(e,r,n){var s=n.variable,i=s.parentDepth,a=r.scopes&&r.scopes[i]||{},o=a.scope||{},p=s.value,c=!n.isStrict&&e.helpers[p]||null,f=n.isPartial&&e.partials[p]||null,h="",v="";return s.root?l(e,r,n):(v=n.isString||s.isLiteral?p:c||f||(o[p]!==t?o[p]:(h=u(o,s))!==t?h:(h=u(a.helpers||{},s))!==t?h:u(r.extra||{},s)),{key:p||"",value:v,type:v===t?"":c?"helper":f?"partial":"object"==typeof v?"object":"literal"})}function c(e,t,r,n,s){return"helper"===t.type?g(e,t,r,n,[{bodyFn:s}]):t.value}function f(e,t,r,n,s,i){for(var a=n.length,o={},u="",l=null,f="";a--;)o=n[a],f=o.variable,l=f.root?c(e,t,r,f,null):null,u=l||o.isString||f.isLiteral&&!f.name?"$"+a:f.name||f.value,s[u]=l||p(e,r,o).value,i.push(s[u]),o.isAlias&&(r.scopes[0].helpers[u]=s[u]);return{obj:s,arr:i}}function h(e,t,r,n,s){e.hasAlias&&(r[t.name||t.value]=s,r[e.root.aliasKey]=n)}function v(e,t,r,n,s){return e.options.render?e.options.render.call(e,s,t,r,n):s}function g(e,t,r,s,i){return n(t.value.apply({name:t.key,getBody:function(){return i[0]?i[0].bodyFn(r):""},getAltBody:function(){return i[1]?i[1].bodyFn(r):""},escape:function(t){return n(t,e,!0)},scope:r.scopes[0].scope,rootScope:r.scopes[r.scopes.length-1].scope,getData:function(t){var n=D(t);return p(e,o(r,{root:n}),n).value}},f(e,t,r,s.vars,{},[]).arr),e,!!i[0].escape)}function y(e,t,r,s,i){for(var a=0,o=i[a],u=!s.helper||"if"===s.helper,l=!1,f=c(e,t,r,s,o.bodyFn);!(l=u&&f||!u&&!f)&&i[a+1];)o=i[++a],u=!o.helper||"if"===o.helper,t=o.root?p(e,r,o.root):{value:u},f=c(e,t,r,o,o.bodyFn);return l?n(o.bodyFn(r),e,o.isEscaped):""}function b(e,t,r,s,o){for(var u="",l=N(t.value),p=l?t.value||[]:z(t.value||{}),c=B(r.scopes[0].helpers,{}),f=s.root.variable,v=0,g=p.length,y="";g>v;v++)y=l?v:p[v],h(s,f,c,y,t.value),r.scopes=a(r,{parentDepth:v?1:0,path:[t.key,y]},i(v,y,g,l?p[v]:t.value[y],c)),r.scopes.splice(1,1),u+=o.bodyFn(r);return n(u,e,o.isEscaped)}function d(e,t,r,s,i){var o=B(r.scopes[0].helpers,{}),u=s.root.variable;return h(s,u,o,u.value,t.value),r.scopes=a(r,{parentDepth:0,path:[t.key]},o),n(i.bodyFn(r),i.isEscaped)}function x(e,t,r){var s=p(e,r,t.root),i="";if(t.isPartial){if(!s.value)return"";f(e,s,r,t.vars,r.scopes[0].helpers,[]),i=s.value(r)}else i="helper"===s.type?g(e,s,r,t,[]):s.value||"";return v(e,t,r,!1,n(i,e,t.isEscaped))}function E(e,t,r,n,s){for(var i=0,a=r.length,u="";a>i;i++)u+=r[i],t[i]&&(u+=t[i].blockIndex>-1?n[t[i].blockIndex](s):x(e,t[i],o(s,t[i],!0)));return u}function S(e,t,r,n){var s=p(e,r,t.root),i=t.helper,a="if"===i||"unless"===i,o="helper"===s.type||L(s.type),u=n[0];return v(e,t,r,!0,a?y(e,s,r,t,n):o?g(e,s,r,t,n):"with"===i?d(e,s,r,t,u):b(e,s,r,t,u))}function k(e,t,r){var n=t||r?t?r?"^\\s*|\\s*$":"^\\s*":"\\s*$":"";return n?e.replace(new RegExp(n,"g"),""):e}function w(e,t){return[-1!==e.indexOf("~"),-1!==t.indexOf("~")]}function A(e,t){return'"'===e.charAt(0)||"'"===e.charAt(0)?(t.isString=!0,e.substr(1,e.length-2)):(/\.|\|/.test(e)&&(t.isStrict=!0),"true"===e?!0:"false"===e?!1:isNaN(e)||""===e?e:+e)}function F(e,t){return e.replace(/^(?:this[/.]|\.\/)/,function(e){return e&&(t.isStrict=!0),""}).replace(/[[\]|]/g,"")}function R(e){return"%"===e.charAt(1)?2:"%"===e.charAt(0)?1:0}function m(e,t){return e?(e.replace(/\(.*?\)|(?:\S*?"(?:\\.|[^\"])*\")|\S+/g,function(e){e&&t.push(e)}),t):t}function P(e,t){var r="string"==typeof e,n="."===e,s=r&&!n?e.split("../"):[],i=r&&!n?s.pop().split(/[.\/]/):[e];return r?{name:t,value:i.pop(),path:i,parentDepth:s.length}:{name:t,value:e,isLiteral:!0,path:[]}}function D(e){var t=[],r={variable:{},isAlias:!1,aliasKey:"",isString:!1,isStrict:!1,active:0};return e=F(e,r).substr(r.active=R(e)),"("===e.charAt(0)?(e=e.substr(1,e.length-2),t=m(e,[]),{variable:{root:t.shift(),vars:j(t,[],{}),path:[]}}):(t=e.split(/([=!<>]+)/),r.variable=t[1]?P(A(t[2],r),t[0]):P(A(t[0],r),""),r)}function O(e,t,r,n){return"|"===t[r]&&r++,n=t[r+1]||"",n=-1!==n.indexOf("|")||"|"===t[r+2]?F(n):"",e.variable.name=F(t[r]),e.aliasKey=n,e.isAlias=!0,"|"===t[r+2]&&r++,n&&r++,r}function j(e,t,r){for(var n=r||{},s=0,i=e.length;i>s;s++)"as"!==e[s]?(n=D(e[s]),t.push(n)):s=O(n,e,++s,"");return t}function M(e,t,r,n,s,i){var a=m(t+(r?" "+r:""),[]),o=a.shift()||"",u=/if|each|with|unless/.test(o)?o:"",l=R(o=u?a.shift()||"":o),p=s.lastIndexOf(e.options.tags[0])<1,t=D(o.substr(l));return i&&!o?{bodyFn:i,isEscaped:p}:{root:t,isPartial:">"===n,isNot:"^"===n,isEscaped:p,hasAlias:"as"===a[0],helper:u,vars:j(a,[],t),active:l,bodyFn:i||null}}function $(e,t,r,n){for(var s=[],i=t.replace(e.inlineRegExp,function(t,r,i,a,o,u){return/^(?:!|=)/.test(i||"")?"":(s.push(w(r,u)),n.push("-block-"===a?{blockIndex:+o}:M(e,a,o,i||"",r)),e.options.splitter)}).split(e.options.splitter),a=i.length;a--;)i[a]=k(i[a],s[a-1]?s[a-1][1]:!1,s[a]?s[a][0]:!1);return function(t,s){return t=s&&!t.extra?o(t,s||{}):t,E(e,n,i,r,t)}}function I(e,t,r,n,s){for(var i=[],a="",o=!1,u=0,l=0,p=r.length;p>l;l+=4)a=r[2+l-4]||"",u=a?a.indexOf(" "):0,o=i[1]||!1,i=r[1+l]?w(r[1+l],r[3+l]):[!1],t.push(M(e,a?a.substr(0,u):"",a?a.substr(u):"","",0!==l?r[1+l-4]||"":s,$(e,k(r[l],o,i[0]),n,[])));return t}function H(e,t,r,n,s,i,a,u,l){var p=s.split(u),c=w(n,p[0]),f=k(i,c[0],c[1]).split(e.elseSplitter),h=I(e,[],f,t,r),v=M(e,u,l,a||"",r);return t.push(function(t){return S(e,v,o(t,v),h)}),r+"-block- "+(t.length-1)+p[1]}function K(e,t,r){for(var n=function(t,n,s,i,a,o,u,l,p){return"#*"===s?(e.partials[a.replace(/['"]/g,"")]=K(e,u,[]),""):H(e,r,n,o,p,u,s,i,a)};t!==(t=t.replace(e.sectionRegExp,n)););return $(e,t,r,[])}var L=function(e){return!!e&&e.constructor===Function},N=Array.isArray||function(e){return!!e&&e.constructor===Array},z=Object.keys||function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t},B=function(e,t){for(var r in e)t[r]=e[r];return t},U=function(e,t){this.version="1.5.0",this.partials={},this.options={tags:["{{","}}"],entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},helpers:{},partials:{},self:"self",characters:'$"<>%-=@',splitter:"|##|",useMustageUnless:!0,render:null},q(this,t||{},e)},q=function(e,t,n){for(var s in t)e.options[s]=t[s];t=e.options,r(e,t.tags),e.entityRegExp=new RegExp("["+z(t.entityMap).join("")+"]","g"),e.helpers=t.helpers,e.registerHelper("lookup",function(){});for(var i in t.partials)e.registerPartial(i,t.partials[i]);n&&e.parse(n)};return U.prototype={render:function(e,t){return this.partials[this.options.self](e,t)},parse:function(e){return this.registerPartial(this.options.self,e)},registerHelper:function(e,t){this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){return this.partials[e]=this.partials[e]||L(t)?t:K(this,t,[])},unregisterPartial:function(e){delete this.partials[e]},setTags:function(e){r(this,e)}},U});
